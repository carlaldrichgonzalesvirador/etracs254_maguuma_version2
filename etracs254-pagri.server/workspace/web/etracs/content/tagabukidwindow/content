   
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="/themes/default/tagabukidresource/bootstrap/css/bootstrap.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="/themes/default/tagabukidresource/dist/css/AdminLTE.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="/themes/default/tagabukidresource/dist/css/skins/_all-skins.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="/themes/default/tagabukidresource/plugins/iCheck/flat/blue.css">
  <!-- jvectormap -->
  <link rel="stylesheet" href="/themes/default/tagabukidresource/plugins/jvectormap/jquery-jvectormap-1.2.2.css">
  <!-- Date Picker -->
  <link rel="stylesheet" href="/themes/default/tagabukidresource/plugins/datepicker/datepicker3.css">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="/themes/default/tagabukidresource/plugins/daterangepicker/daterangepicker.css">

<!-- LayerSlider styles -->
<link rel="stylesheet" href="/themes/default/tagabukidresource/static/css/layerslider.css" type="text/css">
 

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="/themes/default/tagabukidresource/https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="/themes/default/tagabukidresource/https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
<style>
.timex{
    float: right;
    background: transparent;
    margin-top: 0;
    margin-bottom: 0;
    font-size: 12px;
    padding: 7px 5px;
    position: absolute;
    top: 15px;
    right: 10px;
    border-radius: 2px;
}
</style>

<div class="hold-transition sidebar-mini">
    <div class="wrapper">
    
    
    
        <!-- Content Wrapper. Contains page content -->
        <div>
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>
                    Bukidnon
                    <small>Queue</small>
                </h1>
                    <h1 id="time" class="timex">
          
                </h1>
            </section>
        
            <!-- Main content -->
            <section class="content">
                <!-- Small boxes (Stat box) -->
                <div class="row" id="servicewindows">
                    
                   
                </div>
                <!-- /.row -->
                <!-- Main row -->
                <div class="row">
                    <!-- Left col -->
            
                    <!-- /.Left col -->
                    <!-- right col (We are only adding the ID to make the widgets sortable) class="col-lg-5 connectedSortable" -->
                     <section class="col-lg-6 connectedSortable">
                       <!--  <video id="myVideo" width="645" autoplay onended="run();">
                            <source id="ss" src="/themes/default/tagabukidresource/video/bukidnon1.mp4" type="video/mp4">
                        </video> -->
                        <video id="idle_video" width="645" onended="onVideoEnded();"></video>
                    </section>
                    <section  id="servicewaiting">
                                            
                    </section>

                   
              
                </div>
            
            </section>
            <!-- right col -->
        </div>
        <!-- /.row (main row) -->
          
     
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->
    <footer class="main-footer" style="position: absolute; bottom: 0;">
        <image style="margin-left:-106px;" src="/themes/default/tagabukidresource/image/PGB_LOGO.png" />
        <div style="position: relative; top:-90px;"> 
            <marquee><b style="color: #00a65a">Welcome to Bukidnon.</b> Visit <b style="color:#00c0ef">www.bukidnon.gov.ph</b> for more information. Powered by <image src="/themes/default/tagabukidresource/image/logo.png" /> <image src="/themes/default/tagabukidresource/image/rameses.png" /><image width="107" src="/themes/default/tagabukidresource/image/PICTD2.png" /></marquee>
        </div>
    </footer>
      
</div>
<!-- ./wrapper -->

<!-- jQuery 2.2.3 -->
<script src="/themes/default/tagabukidresource/plugins/jQuery/jquery-2.2.3.min.js"></script>
<!-- jQuery UI 1.11.4 -->
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  \$.widget.bridge('uibutton', \$.ui.button);
</script>
<!-- Bootstrap 3.3.6 -->
<!-- <script src="/themes/default/tagabukidresource/bootstrap/js/bootstrap.js"></script> -->
<!-- ChartJS 1.0.1 -->
<script src="/themes/default/tagabukidresource/plugins/chartjs/Chart.min.js"></script>
<!-- Sparkline -->
<script src="/themes/default/tagabukidresource/plugins/sparkline/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script src="/themes/default/tagabukidresource/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="/themes/default/tagabukidresource/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<!-- jQuery Knob Chart -->
<script src="/themes/default/tagabukidresource/plugins/knob/jquery.knob.js"></script>
<!-- daterangepicker -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
<!-- <script src="/themes/default/tagabukidresource/plugins/daterangepicker/daterangepicker.js"></script> -->

<script src="/themes/default/tagabukidresource/plugins/slimScroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="/themes/default/tagabukidresource/plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="/themes/default/tagabukidresource/dist/js/app.min.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<!-- <script src="/themes/default/tagabukidresource/dist/js/pages/dashboard.js"></script> -->
<!-- AdminLTE for demo purposes -->
<script src="/themes/default/tagabukidresource/dist/js/demo.js"></script>
<script type="text/javascript">var lsjQuery = jQuery;</script>
<script type="text/javascript" src="/themes/default/tagabukidresource/static/js/layerslider.kreaturamedia.jquery.js?ver=5.3.2"></script>
<script type="text/javascript" src="/themes/default/tagabukidresource/static/js/greensock.js?ver=1.11.8"></script> 
<script type="text/javascript" src="/themes/default/tagabukidresource/static/js/jquery.signalR-1.1.3.min.js"></script> 

<script type="text/javascript"> 
    \$(function () {

        date_time("time");

        var qsock = Socket.create('tagabukidpoll'); 
        qsock.handlers.h = function( o ) { 
            if (o.data){
              fillQueueList(o.data);
              fillWindowNowServing(o.data1);
            }
            window.console.log( o ); 
        } 
        qsock.start(); 
        onload();
        fillwindow();
    }); 

    // var video_count = 1;
    // var videoPlayer = document.getElementById("ss");        
    // var video = document.getElementById("myVideo");

    // function run(){
    //       video_count++;
    //       if (video_count == 3) video_count = 1;
    //       videoPlayer.setAttribute("src","/themes/default/tagabukidresource/video/bukidnon"+video_count+".mp4");  
    //       video.play();
    //  }

    var video_list      = ["/themes/default/tagabukidresource/video/bukidnon1.mp4",
                        "/themes/default/tagabukidresource/video/bukidnon2.mp4"
                       ];
    var video_index     = 0;
    var video_player    = null;

    function onload(){
        console.log("body loaded");
        video_player        = document.getElementById("idle_video");
        video_player.setAttribute("src", video_list[video_index]);
        video_player.play();
    }

    function onVideoEnded(){
        console.log("video ended");
        if(video_index < video_list.length - 1){
            video_index++;
        }
        else{
            video_index = 0;
        }
        video_player.setAttribute("src", video_list[video_index]);
        video_player.play();
    }

    function fillWindowNowServing(o){
      \$('h3[id^="WIN"]').html("OFFLINE");
      \$.each(o,function(k,v){
          // var queueno = \$("#"+v.queuewindow.objid).html();

          // if (queueno != v.queueshort){
              var bleep = new Audio();
              bleep.src = '/themes/default/tagabukidresource/video/notify.mp3';
              bleep.play();
              \$("#WIN"+v.queuewindow.objid).html(v.queueshort);
          // }

      });
    }

    
    function fillwindow(o){
        var svc = Service.lookup('TagabukidQueueService', 'admin');
         var o = svc.getservicewindows();
         \$.each(o,function(k,v){
             var html = '<div class="col-lg-3 col-xs-6 but" name="'+ v.code + '">'+
                          '<div class="small-box bg-green" >'+
                                  '<div class="inner">'+
                                      '<h4>'+v.code+' NOW SERVING</h4>'+
                                      '<h3 id="WIN'+v.objid+'">-</h3>'+
                                  '</div>'+
                                  '<div class="icon">'+
                                      '<i class="ion ion-android-person"></i>'+
                                  '</div>'+
                          '</div>'+
                      '</div>';
              \$("#servicewindows").append(html);
          });
    }

    function fillQueueList(o){
      var html = "";
      \$.each(o,function(k,v){
          var queuelist = "";  
          var servicewaiting =  '<div class="col-lg-3 col-xs-6">' +
                                  '<div class="box-header">' +
                                    '<h1 class="box-title">'+v.name+'</h1>' +
                                  '</div>' +
                                  '<div class="box-body no-padding">' +
                                  '<table class="table table-striped">';
                                   // +
                                   //    '<tr>' +
                                   //      '<th>Queue no.</th>' +
                                   //    '</tr>';
       
          \$.each(v.queuelist,function(a,b){
              queuelist += '<tr><td><h1>'+b.queueshort+'</h1></td></tr>';
          });
           servicewaiting += queuelist + 
                                    '</table>' +
                                  '</div>' +
                                '</div>';
          html += servicewaiting;
          
        });
      \$("#servicewaiting").html(html);
    }
    function format2(n, currency) {
        return currency + " " + n.toFixed(2).replace(/./g, function(c, i, a) {
            return i > 0 && c !== "." && (a.length - i) % 3 === 0 ? "," + c : c;
        });
    }

   function date_time(id){
            date = new Date;
            year = date.getFullYear();
            month = date.getMonth();
            months = new Array('January', 'February', 'March', 'April', 'May', 'June', 'Jully', 'August', 'September', 'October', 'November', 'December');
            d = date.getDate();
            day = date.getDay();
            days = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
            h = date.getHours();
            if(h<10)
            {
                    h = "0"+h;
            }
            m = date.getMinutes();
            if(m<10)
            {
                    m = "0"+m;
            }
            s = date.getSeconds();
            if(s<10)
            {
                    s = "0"+s;
            }
            result = ''+days[day]+' '+months[month]+' '+d+', '+year+' '+h+':'+m+':'+s;
            document.getElementById(id).innerHTML = result;
            setTimeout('date_time("'+id+'");','1000');
            return true;
    }
  </script>